$(function () {
    consoleInit(main)
});


const ARCANA_CHEF_ABI = [{ "type": "constructor", "stateMutability": "nonpayable", "inputs": [{ "type": "address", "name": "_arcana", "internalType": "contract IArcanaERC20" }, { "type": "uint256", "name": "_arcanaPerBlock", "internalType": "uint256" }] }, { "type": "event", "name": "AllocPointsUpdated", "inputs": [{ "type": "address", "name": "caller", "internalType": "address", "indexed": true }, { "type": "uint256", "name": "previousAmount", "internalType": "uint256", "indexed": false }, { "type": "uint256", "name": "newAmount", "internalType": "uint256", "indexed": false }], "anonymous": false }, { "type": "event", "name": "Deposit", "inputs": [{ "type": "address", "name": "user", "internalType": "address", "indexed": true }, { "type": "uint256", "name": "pid", "internalType": "uint256", "indexed": true }, { "type": "uint256", "name": "amount", "internalType": "uint256", "indexed": false }], "anonymous": false }, { "type": "event", "name": "DevAddressChanged", "inputs": [{ "type": "address", "name": "caller", "internalType": "address", "indexed": true }, { "type": "address", "name": "oldAddress", "internalType": "address", "indexed": false }, { "type": "address", "name": "newAddress", "internalType": "address", "indexed": false }], "anonymous": false }, { "type": "event", "name": "EmergencyWithdraw", "inputs": [{ "type": "address", "name": "user", "internalType": "address", "indexed": true }, { "type": "uint256", "name": "pid", "internalType": "uint256", "indexed": true }, { "type": "uint256", "name": "amount", "internalType": "uint256", "indexed": false }], "anonymous": false }, { "type": "event", "name": "EmissionRateUpdated", "inputs": [{ "type": "address", "name": "caller", "internalType": "address", "indexed": true }, { "type": "uint256", "name": "previousAmount", "internalType": "uint256", "indexed": false }, { "type": "uint256", "name": "newAmount", "internalType": "uint256", "indexed": false }], "anonymous": false }, { "type": "event", "name": "FeeAddressChanged", "inputs": [{ "type": "address", "name": "caller", "internalType": "address", "indexed": true }, { "type": "address", "name": "oldAddress", "internalType": "address", "indexed": false }, { "type": "address", "name": "newAddress", "internalType": "address", "indexed": false }], "anonymous": false }, { "type": "event", "name": "MetaTxnsDisabled", "inputs": [{ "type": "address", "name": "caller", "internalType": "address", "indexed": true }], "anonymous": false }, { "type": "event", "name": "MetaTxnsEnabled", "inputs": [{ "type": "address", "name": "caller", "internalType": "address", "indexed": true }], "anonymous": false }, { "type": "event", "name": "OperatorTransferred", "inputs": [{ "type": "address", "name": "previousOperator", "internalType": "address", "indexed": true }, { "type": "address", "name": "newOperator", "internalType": "address", "indexed": true }], "anonymous": false }, { "type": "event", "name": "OwnershipTransferred", "inputs": [{ "type": "address", "name": "previousOwner", "internalType": "address", "indexed": true }, { "type": "address", "name": "newOwner", "internalType": "address", "indexed": true }], "anonymous": false }, { "type": "event", "name": "RewardLockedUp", "inputs": [{ "type": "address", "name": "user", "internalType": "address", "indexed": true }, { "type": "uint256", "name": "pid", "internalType": "uint256", "indexed": true }, { "type": "uint256", "name": "amountLockedUp", "internalType": "uint256", "indexed": false }], "anonymous": false }, { "type": "event", "name": "Withdraw", "inputs": [{ "type": "address", "name": "user", "internalType": "address", "indexed": true }, { "type": "uint256", "name": "pid", "internalType": "uint256", "indexed": true }, { "type": "uint256", "name": "amount", "internalType": "uint256", "indexed": false }], "anonymous": false }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint16", "name": "", "internalType": "uint16" }], "name": "MAXIMUM_DEPOSIT_FEE_RATE", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "MAXIMUM_HARVEST_INTERVAL", "inputs": [] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "add", "inputs": [{ "type": "uint256", "name": "_allocPoint", "internalType": "uint256" }, { "type": "address", "name": "_lpToken", "internalType": "contract IERC20" }, { "type": "uint16", "name": "_depositFeeBP", "internalType": "uint16" }, { "type": "uint256", "name": "_harvestInterval", "internalType": "uint256" }, { "type": "bool", "name": "_withUpdate", "internalType": "bool" }] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "bool", "name": "", "internalType": "bool" }], "name": "canHarvest", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }, { "type": "address", "name": "_user", "internalType": "address" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "deposit", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }, { "type": "uint256", "name": "_amount", "internalType": "uint256" }] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "address", "name": "", "internalType": "address" }], "name": "devAddress", "inputs": [] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "disableMetaTxns", "inputs": [] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "emergencyWithdraw", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "enableMetaTxns", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "address", "name": "", "internalType": "address" }], "name": "feeAddress", "inputs": [] }, { "type": "function", "stateMutability": "pure", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "getMultiplier", "inputs": [{ "type": "uint256", "name": "_from", "internalType": "uint256" }, { "type": "uint256", "name": "_to", "internalType": "uint256" }] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "bool", "name": "", "internalType": "bool" }], "name": "isTrustedForwarder", "inputs": [{ "type": "address", "name": "forwarder", "internalType": "address" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "massUpdatePools", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "bool", "name": "", "internalType": "bool" }], "name": "metaTxnsEnabled", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "address", "name": "", "internalType": "address" }], "name": "operator", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "address", "name": "", "internalType": "address" }], "name": "owner", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "pendingArcana", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }, { "type": "address", "name": "_user", "internalType": "address" }] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "address", "name": "lpToken", "internalType": "contract IERC20" }, { "type": "uint256", "name": "allocPoint", "internalType": "uint256" }, { "type": "uint256", "name": "lastRewardBlock", "internalType": "uint256" }, { "type": "uint256", "name": "accArcanaPerShare", "internalType": "uint256" }, { "type": "uint16", "name": "depositFeeBP", "internalType": "uint16" }, { "type": "uint256", "name": "harvestInterval", "internalType": "uint256" }, { "type": "uint256", "name": "totalLp", "internalType": "uint256" }], "name": "poolInfo", "inputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "poolLength", "inputs": [] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "renounceOwnership", "inputs": [] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "set", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }, { "type": "uint256", "name": "_allocPoint", "internalType": "uint256" }, { "type": "uint16", "name": "_depositFeeBP", "internalType": "uint16" }, { "type": "uint256", "name": "_harvestInterval", "internalType": "uint256" }, { "type": "bool", "name": "_withUpdate", "internalType": "bool" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "setDevAddress", "inputs": [{ "type": "address", "name": "_devAddress", "internalType": "address" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "setFeeAddress", "inputs": [{ "type": "address", "name": "_feeAddress", "internalType": "address" }] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "address", "name": "", "internalType": "contract IArcanaERC20" }], "name": "arcana", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "arcanaPerBlock", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "startBlock", "inputs": [] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "startFarming", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "totalAllocPoint", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "totalLockedUpRewards", "inputs": [] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }], "name": "totalArcanaInPools", "inputs": [] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "transferOperator", "inputs": [{ "type": "address", "name": "newOperator", "internalType": "address" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "transferOwnership", "inputs": [{ "type": "address", "name": "newOwner", "internalType": "address" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "updateAllocPoint", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }, { "type": "uint256", "name": "_allocPoint", "internalType": "uint256" }, { "type": "bool", "name": "_withUpdate", "internalType": "bool" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "updateEmissionRate", "inputs": [{ "type": "uint256", "name": "_arcanaPerBlock", "internalType": "uint256" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "updatePool", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }] }, { "type": "function", "stateMutability": "view", "outputs": [{ "type": "uint256", "name": "amount", "internalType": "uint256" }, { "type": "uint256", "name": "rewardDebt", "internalType": "uint256" }, { "type": "uint256", "name": "rewardLockedUp", "internalType": "uint256" }, { "type": "uint256", "name": "nextHarvestUntil", "internalType": "uint256" }], "name": "userInfo", "inputs": [{ "type": "uint256", "name": "", "internalType": "uint256" }, { "type": "address", "name": "", "internalType": "address" }] }, { "type": "function", "stateMutability": "nonpayable", "outputs": [], "name": "withdraw", "inputs": [{ "type": "uint256", "name": "_pid", "internalType": "uint256" }, { "type": "uint256", "name": "_amount", "internalType": "uint256" }] }]

async function main() {
    const App = await init_ethers();

    _print(`Initialized ${App.YOUR_ADDRESS}\n`);
    _print("Entering the realm of Annrion...\n");

    const ARCANA_CHEF_ADDR = "0x48f35237Ec3194Ea06E7462C2b4E1A5186317415";
    const rewardTokenTicker = "ARCANA";
    const ARCANA_CHEF = new ethers.Contract(ARCANA_CHEF_ADDR, ARCANA_CHEF_ABI, App.provider);

    const blocksPerSeconds = await getAverageBlockTime(App);

    const startBlock = await ARCANA_CHEF.startBlock();
    const currentBlock = await App.provider.getBlockNumber();

    const tgurl = `<a href='https://t.me/sevengodsxyz/' target='_blank'>Telegram Community</a>`;

    const discordurl = `<a href='https://t.me/sevengodsxyz/' target='_blank'>Discord Community </a>`;

    const twitterurl = `<a href='https://t.me/sevengodsxyz/' target='_blank'>Twittter </a>`;

    let rewardsPerWeek = 0
    if (currentBlock < startBlock) {
        _print(`
       \n
        <b><i>*REWARDS HAVE NOT YET STARTED</i> </b>

        <b>JOIN OFFICIAL CHANNELS AND DON'T MISS THE LAUNCH DATE!  <b>

        <a href='https://twitter.com/7godsxyz' target='_blank'>[Twitter]</a> - <a href='https://t.me/sevengodsxyz' target='_blank'>[Telegram]</a> - <a href='https://discord.com/invite/tRVdpYZWE2' target='_blank'>[Discord]</a> - <a href='https://medium.com/@7godsxyz/7gods-decentralized-open-world-mmorpg-launching-on-avalanche-5d7b4af2f824' target='_blank'>[Medium]</a>

        \n`

        );

    } else {
        rewardsPerWeek = await ARCANA_CHEF.arcanaPerBlock() / 1e18 *
            604800 / blocksPerSeconds;
    }


    const tokens = {};
    const prices = await getAvaxPrices();

    await loadGeneralChefContract(App, tokens, prices, ARCANA_CHEF, ARCANA_CHEF_ADDR, ARCANA_CHEF_ABI, rewardTokenTicker,
        "arcana", null, rewardsPerWeek, "pendingArcana", [], "avax");

    hideLoading();
}